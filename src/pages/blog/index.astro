---
import BlogLayout from "../../components/BlogLayout.astro";
import BlogGrid from "../../components/BlogGrid.astro";
import BaseHead from "../../components/BaseHead.astro";
import BlogHeader from "../../components/legacy/BlogHeader.astro";
import BlogPostPreview from "../../components/BlogPostPreview.astro";
// import Adsense from "../../components/Adsense.astro";
import Header from "../../components/legacy/Header.astro";
import { Footer } from "../../components/v0/footer.tsx";

const title = "Soratabi Blog";
const description = "The perfect product for your aviation blog.";
const permalink = "https://soratabi.nekohack.me/";

let allPosts = await Astro.glob("./p/*.{md,mdx}");
allPosts = allPosts.sort(
	(a, b) => new Date(b.frontmatter.date).valueOf() - new Date(a.frontmatter.date).valueOf(),
);
---

<html lang="en">
  <head>
    <BaseHead {title} {description} {permalink} />

    <style>
      body {
        /* rgba(167, 123, 243, 0.1) */
        background: #000;
        color: #fff;
        user-select: none;
        -moz-user-select: none;
        -webkit-user-select: none;
        -ms-user-select: none;
      }

      img {
        padding: 0;
        margin: 0;
        width: 100%;
        object-fit: cover;
        object-position: center;
      }

      @media(max-width: 767px) {
        img {
          width: 200px;
          height: 200px;
        }
      }
    </style>
  </head>

  <body>
    <Header>
      <BlogHeader {title} {description} />
    </Header>
    <BlogLayout>
      {allPosts.slice(0,1).map((p) =>
        <a href={p.url}>
          <BlogPostPreview
            imagePath={p.frontmatter.image}
            imageSize="large"
            title={p.frontmatter.title}
            tags={p.frontmatter.tags}
          />
        </a>
      )}
    </BlogLayout>
    <BlogGrid>
      {allPosts.filter((_, key) => key !== 0).map((p) => (
        <a href={p.url}>
          <BlogPostPreview
            imagePath={p.frontmatter.image}
            title={p.frontmatter.title}
            tags={p.frontmatter.tags}
          />
        </a>
      ))}
    </BlogGrid>
    {/* <Adsense /> */}
    <Footer />
  </body>
</html>
